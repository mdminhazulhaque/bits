<!DOCTYPE html> <html lang="en-us"> <head> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <meta name="theme-color" content="#000000"> <meta name="msapplication-navbutton-color" content="#000000"> <meta name="apple-mobile-web-app-status-bar-style" content="#000000"> <meta name="description" content="I heavily rely on CLI tools rather than GUI/Web interface. AWS CLI is a great tool to manage AWS resources across different accounts, regions and environ..."> <meta name="author" content="Md. Minhazul Haque"> <script type="application/ld+json">{ "@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [ { "@type": "ListItem", "position": 1, "name": "Bits", "item": "https://bits.mdminhazulhaque.io/" },{ "@type": "ListItem", "position": 2, "name": "aws", "item": "https://bits.mdminhazulhaque.io/aws" },{ "@type": "ListItem", "position": 3, "name": "AWS CLI Cheatsheet", "item": "https://bits.mdminhazulhaque.io//aws/aws-cli-cheatsheet.html" }] }</script> <title>AWS CLI Cheatsheet | Bits</title> <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet"> <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link rel="stylesheet" href="/public/css/print.css"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon.png"> <link rel="icon" type="image/x-icon" href="/public/favicon.ico?v=1"> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <style>.blink{animation:blink 1s infinite;}@keyframes blink{to{opacity:.0}}</style> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1> <a class="monospace" href="/"> Bits<span class="blink">_</span> </a> </h1> <p class="lead">Random posts written by <a href="https://mdminhazulhaque.io">Minhaz</a></p> <p>Find me at ... <br><a href="https://github.com/mdminhazulhaque"><i class="fa fa-fw fa-github"></i> Github</a> <br><a href="https://bd.linkedin.com/in/mdminhazulhaque"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a> </p> </div> <p>&copy; 2012 - 2021. All rights reserved.</p> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">AWS CLI Cheatsheet</h1> <hr> <i class="fa fa-fw fa-calendar"></i>28 Mar 2020 <i class="fa fa-fw fa-tag"></i><a href="/aws">aws</a> <hr> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9642838276352812" data-ad-slot="2958174403" data-ad-format="auto" data-full-width-responsive="true"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> <br> <p>I heavily rely on CLI tools rather than GUI/Web interface. AWS CLI is a great tool to manage AWS resources across different accounts, regions and environments.</p> <p>I have published a curated list of frequent AWS commands that might come handy. Feel free to star it, fork it or send pull request.</p> <blockquote> <p><a href="https://github.com/mdminhazulhaque/aws-cli-cheatsheet">mdminhazulhaque/aws-cli-cheatsheet</a></p> </blockquote> <h3 id="tools-required">Tools Required</h3> <ul> <li>aws https://aws.amazon.com/cli/</li> <li>jq https://stedolan.github.io/jq/</li> </ul> <p>Disclaimer: All Resource, Account, ARN, Hostname etc are generated using <a href="https://faker.readthedocs.io/en/master">Faker</a>. They do not match any real user data.</p> <h3 id="table-of-contents">Table of Contents</h3> <ul> <li><a href="#ec2">EC2</a> <ul> <li><a href="#list-instance-id-type-and-name">List Instance ID, Type and Name</a></li> <li><a href="#list-instances-with-public-ip-address-and-name">List Instances with Public IP Address and Name</a></li> <li><a href="#list-of-vpcs-and-cidr-ip-block">List of VPCs and CIDR IP Block</a></li> <li><a href="#list-of-subnets-for-a-vpc">List of Subnets for a VPC</a></li> <li><a href="#list-of-security-groups">List of Security Groups</a></li> <li><a href="#print-security-groups-for-an-instance">Print Security Groups for an Instance</a></li> <li><a href="#edit-security-groups-of-an-instance">Edit Security Groups of an Instance</a></li> <li><a href="#print-security-group-rules-as-fromaddress-and-toport">Print Security Group Rules as FromAddress and ToPort</a></li> <li><a href="#add-rule-to-security-group">Add Rule to Security Group</a></li> <li><a href="#delete-rule-from-security-group">Delete Rule from Security Group</a></li> <li><a href="#edit-rules-of-security-group">Edit Rules of Security Group</a></li> <li><a href="#delete-security-group">Delete Security Group</a></li> </ul> </li> <li><a href="#s3">S3</a> <ul> <li><a href="#list-buckets">List Buckets</a></li> <li><a href="#list-files-in-a-bucket">List Files in a Bucket</a></li> <li><a href="#create-bucket">Create Bucket</a></li> <li><a href="#delete-bucket">Delete Bucket</a></li> <li><a href="#download-s3-object-to-local">Download S3 Object to Local</a></li> <li><a href="#upload-local-file-as-s3-object">Upload Local File as S3 Object</a></li> <li><a href="#delete-s3-object">Delete S3 Object</a></li> <li><a href="#download-bucket-to-local">Download Bucket to Local</a></li> <li><a href="#upload-local-directory-to-bucket">Upload Local Directory to Bucket</a></li> <li><a href="#share-s3-object-without-public-access">Share S3 Object without Public Access</a></li> </ul> </li> <li><a href="#api-gateway">API Gateway</a> <ul> <li><a href="#list-of-api-gateway-ids-and-names">List of API Gateway IDs and Names</a></li> <li><a href="#list-of-api-gateway-keys">List of API Gateway Keys</a></li> <li><a href="#list-api-gateway-domain-names">List API Gateway Domain Names</a></li> <li><a href="#list-of-resources-for-api-gateway">List of Resources for API Gateway</a></li> <li><a href="#find-lambda-for-api-gateway-resource">Find Lambda for API Gateway Resource</a></li> </ul> </li> <li><a href="#elb">ELB</a> <ul> <li><a href="#list-of-elb-hostnames">List of ELB Hostnames</a></li> <li><a href="#list-of-elb-arns">List of ELB ARNs</a></li> <li><a href="#list-of-elb-target-group-arns">List of ELB Target Group ARNs</a></li> <li><a href="#find-instances-for-a-target-group">Find Instances for a Target Group</a></li> </ul> </li> <li><a href="#rds">RDS</a> <ul> <li><a href="#list-of-db-clusters">List of DB Clusters</a></li> <li><a href="#list-of-db-instances">List of DB Instances</a></li> <li><a href="#take-db-instance-snapshot">Take DB Instance Snapshot</a></li> <li><a href="#take-db-cluster-snapshot">Take DB Cluster Snapshot</a></li> </ul> </li> <li><a href="#elasticache">ElastiCache</a> <ul> <li><a href="#list-of-elasticache-machine-type-and-name">List of ElastiCache Machine Type and Name</a></li> <li><a href="#list-of-elasticache-replication-groups">List of ElastiCache Replication Groups</a></li> <li><a href="#list-of-elasticache-snapshots">List of ElastiCache Snapshots</a></li> <li><a href="#create-elasticache-snapshot">Create ElastiCache Snapshot</a></li> <li><a href="#delete-elasticache-snapshot">Delete ElastiCache Snapshot</a></li> <li><a href="#scale-updown-elasticache-replica">Scale Up/Down ElastiCache Replica</a></li> </ul> </li> <li><a href="#lambda">Lambda</a> <ul> <li><a href="#list-of-lambda-functions-runtime-and-memory">List of Lambda Functions, Runtime and Memory</a></li> <li><a href="#list-of-lambda-layers">List of Lambda Layers</a></li> <li><a href="#list-of-source-event-for-lambda">List of Source Event for Lambda</a></li> <li><a href="#download-lambda-code">Download Lambda Code</a></li> </ul> </li> <li><a href="#cloudwatch">Cloudwatch</a> <ul> <li><a href="#list-of-cloudwatch-alarms-and-status">List of CloudWatch Alarms and Status</a></li> <li><a href="#create-alarm-for-ec2-high-cpuutilization">Create Alarm for EC2 High CPUUtilization</a></li> <li><a href="#create-alarm-for-ec2-high-statuscheckfailed_instance">Create Alarm for EC2 High StatusCheckFailed_Instance</a></li> </ul> </li> <li><a href="#route53">Route53</a> <ul> <li><a href="#list-domains">List Domains</a></li> <li><a href="#list-records-for-a-domain-zone">List Records for a Domain (Zone)</a></li> </ul> </li> <li><a href="#sns">SNS</a> <ul> <li><a href="#list-of-sns-topics">List of SNS Topics</a></li> <li><a href="#list-of-sns-topic-and-related-subscriptions">List of SNS Topic and related Subscriptions</a></li> <li><a href="#publish-to-sns-topic">Publish to SNS Topic</a></li> </ul> </li> <li><a href="#dynamodb">DynamoDB</a> <ul> <li><a href="#list-of-dynamodb-tables">List of DynamoDB Tables</a></li> <li><a href="#get-all-items-from-a-table">Get All Items from a Table</a></li> <li><a href="#get-item-count-from-a-table">Get Item Count from a Table</a></li> <li><a href="#get-item-using-key">Get Item using Key</a></li> <li><a href="#get-specific-fields-from-an-item">Get Specific Fields from an Item</a></li> <li><a href="#delete-item-using-key">Delete Item using Key</a></li> </ul> </li> <li><a href="#sqs">SQS</a> <ul> <li><a href="#list-queues">List Queues</a></li> <li><a href="#create-queue">Create Queue</a></li> <li><a href="#count-messages-in-queue">Count Messages in Queue</a></li> <li><a href="#send-message">Send Message</a></li> <li><a href="#receive-message">Receive Message</a></li> <li><a href="#delete-message">Delete Message</a></li> <li><a href="#purge-queue">Purge Queue</a></li> <li><a href="#delete-queue">Delete Queue</a></li> </ul> </li> <li><a href="#cloudfront">CloudFront</a> <ul> <li><a href="#list-of-cloudfront-distributions-and-origins">List of CloudFront Distributions and Origins</a></li> <li><a href="#create-cache-invalidation">Create Cache Invalidation</a></li> <li><a href="#check-cache-invalidation-status">Check Cache Invalidation Status</a></li> </ul> </li> <li><a href="#amplify">Amplify</a> <ul> <li><a href="#list-of-amplify-apps-and-source-repository">List of Amplify Apps and Source Repository</a></li> </ul> </li> <li><a href="#cognito">Cognito</a> <ul> <li><a href="#list-of-user-pool-ids-and-names">List of User Pool IDs and Names</a></li> <li><a href="#list-of-phone-and-email-of-all-users">List of Phone and Email of All Users</a></li> </ul> </li> <li><a href="#iam-user">IAM User</a> <ul> <li><a href="#list-of-userid-and-username">List of UserId and UserName</a></li> <li><a href="#get-single-user">Get Single User</a></li> <li><a href="#add-user">Add User</a></li> <li><a href="#delete-user">Delete User</a></li> <li><a href="#list-access-keys-for-user">List Access Keys for User</a></li> <li><a href="#delete-access-key-for-user">Delete Access Key for User</a></li> <li><a href="#activatedeactivate-access-key-for-user">Activate/Deactivate Access Key for User</a></li> <li><a href="#generate-new-access-key-for-user">Generate New Access Key for User</a></li> </ul> </li> <li><a href="#iam-group">IAM Group</a> <ul> <li><a href="#list-groups">List Groups</a></li> <li><a href="#adddelete-groups">Add/Delete Groups</a></li> <li><a href="#list-of-policies-and-arns">List of Policies and ARNs</a></li> <li><a href="#list-of-usergrouproles-for-a-policy">List of User/Group/Roles for a Policy</a></li> <li><a href="#list-policies-for-a-group">List Policies for a Group</a></li> <li><a href="#add-policy-to-a-group">Add Policy to a Group</a></li> <li><a href="#add-user-to-a-group">Add User to a Group</a></li> <li><a href="#remove-user-from-a-group">Remove User from a Group</a></li> <li><a href="#list-users-in-a-group">List Users in a Group</a></li> <li><a href="#list-groups-for-a-user">List Groups for a User</a></li> <li><a href="#attachdetach-policy-to-a-group">Attach/Detach Policy to a Group</a></li> </ul> </li> </ul> <h3 id="pro-tip">Pro Tip!</h3> <p>If you have multiple AWS Accounts, you can use bash alias like the following. So you no longer need to pass <code class="language-plaintext highlighter-rouge">--profile</code> to <code class="language-plaintext highlighter-rouge">aws</code> tool.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span>aws-prod<span class="o">=</span><span class="s2">"aws --profile work-prod"</span>
<span class="nb">alias </span>aws-dev<span class="o">=</span><span class="s2">"aws --profile work-dev"</span>
<span class="nb">alias </span>aws-self<span class="o">=</span><span class="s2">"aws --profile personal"</span>
<span class="nb">alias </span><span class="nv">aws</span><span class="o">=</span><span class="s2">"aws --profile work-dev"</span>
</code></pre></div></div> <p>To format <code class="language-plaintext highlighter-rouge">aws</code> command output into tables, you can pipe output to <code class="language-plaintext highlighter-rouge">column -t</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># aws ec2 describe-instances | jq ...
i-0f112d652ecf13dac c3.x2large fisher.com
i-0b3b5128445a332db t2.nano robinson.com

# aws ec2 describe-instances | jq ... | column -t
i-0f112d652ecf13dac  c3.x2large  fisher.com
i-0b3b5128445a332db  t2.nano     robinson.com
</code></pre></div></div> <h2 id="ec2">EC2</h2> <h4 id="list-instance-id-type-and-name">List Instance ID, Type and Name</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances | jq <span class="nt">-r</span> <span class="s1">'.Reservations[].Instances[]|.InstanceId+" "+.InstanceType+" "+(.Tags[] | select(.Key == "Name").Value)'</span>
i-0f112d652ecf13dac  c3.xlarge  fisher.com
i-0b3b5128445a332db  t2.nano    robinson.com
i-0d1c1cf4e980ac593  t2.micro   nolan.com
i-004ee6b792c3b6914  t2.nano    grimes-green.net
i-00f11e8e33c971058  t2.nano    garrett.com
</code></pre></div></div> <h4 id="list-instances-with-public-ip-address-and-name">List Instances with Public IP Address and Name</h4> <p>Tip: You can directly put this to your <code class="language-plaintext highlighter-rouge">/etc/hosts</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances <span class="nt">--query</span> <span class="s1">'Reservations[*].Instances[?not_null(PublicIpAddress)]'</span> | jq <span class="nt">-r</span> <span class="s1">'.[][]|.PublicIpAddress+" "+(.Tags[]|select(.Key=="Name").Value)'</span>
223.64.72.64    fisher.com
198.82.207.161  robinson.com
182.139.20.233  nolan.com
153.134.83.44   grimes-green.net
202.32.63.121   garrett.com
</code></pre></div></div> <h4 id="list-of-vpcs-and-cidr-ip-block">List of VPCs and CIDR IP Block</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-vpcs | jq <span class="nt">-r</span> <span class="s1">'.Vpcs[]|.VpcId+" "+(.Tags[]|select(.Key=="Name").Value)+" "+.CidrBlock'</span>
vpc-0d1c1cf4e980ac593  frontend-vpc  10.0.0.0/16
vpc-00f11e8e33c971058  backend-vpc   172.31.0.0/16
</code></pre></div></div> <h4 id="list-of-subnets-for-a-vpc">List of Subnets for a VPC</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-subnets <span class="nt">--filter</span> <span class="nv">Name</span><span class="o">=</span>vpc-id,Values<span class="o">=</span>vpc-0d1c1cf4e980ac593 | jq <span class="nt">-r</span> <span class="s1">'.Subnets[]|.SubnetId+" "+.CidrBlock+" "+(.Tags[]|select(.Key=="Name").Value)'</span>
subnet-0dae5d4daa47fe4a2  10.0.128.0/20  Public Subnet 1
subnet-0641a25faccb01f0f  10.0.32.0/19   Private Subnet 2
subnet-09fb8038641f1f36f  10.0.0.0/19    Private Subnet 1
subnet-02a63c67684d8deed  10.0.144.0/20  Public Subnet 2
</code></pre></div></div> <h4 id="list-of-security-groups">List of Security Groups</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-security-groups | jq <span class="nt">-r</span> <span class="s1">'.SecurityGroups[]|.GroupId+" "+.GroupName'</span>
sg-02a63c67684d8deed  backend-db
sg-0dae5d4daa47fe4a2  backend-redis
sg-0a56bff7b12264282  frontend-lb
sg-0641a25faccb01f0f  frontend-https
sg-09fb8038641f1f36f  internal-ssh
</code></pre></div></div> <h4 id="print-security-groups-for-an-instance">Print Security Groups for an Instance</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances <span class="nt">--instance-ids</span> i-0dae5d4daa47fe4a2 | jq <span class="nt">-r</span> <span class="s1">'.Reservations[].Instances[].SecurityGroups[]|.GroupId+" "+.GroupName'</span>
sg-02a63c67684d8deed  backend-db
sg-0dae5d4daa47fe4a2  backend-redis
</code></pre></div></div> <h4 id="edit-security-groups-of-an-instance">Edit Security Groups of an Instance</h4> <p>You have to provide existing Security Group IDs as well</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 modify-instance-attribute <span class="nt">--instance-id</span> i-0dae5d4daa47fe4a2 <span class="nt">--groups</span> sg-02a63c67684d8deed sg-0dae5d4daa47fe4a2
</code></pre></div></div> <h4 id="print-security-group-rules-as-fromaddress-and-toport">Print Security Group Rules as FromAddress and ToPort</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-security-groups <span class="nt">--group-ids</span> sg-02a63c67684d8deed | jq <span class="nt">-r</span> <span class="s1">'.SecurityGroups[].IpPermissions[]|. as $parent|(.IpRanges[].CidrIp+" "+($parent.ToPort|tostring))'</span>
223.64.72.64/32    3306
198.82.207.161/32  3306
168.244.58.160/32  3306
202.0.149.202/32   3306
212.143.80.102/32  3306
</code></pre></div></div> <h4 id="add-rule-to-security-group">Add Rule to Security Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> sg-02a63c67684d8deed <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 443 <span class="nt">--cidr</span> 35.0.0.1
</code></pre></div></div> <h4 id="delete-rule-from-security-group">Delete Rule from Security Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 revoke-security-group-ingress <span class="nt">--group-id</span> sg-02a63c67684d8deed <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 443 <span class="nt">--cidr</span> 35.0.0.1
</code></pre></div></div> <h4 id="edit-rules-of-security-group">Edit Rules of Security Group</h4> <p>You have to provide All IP Ranges as well</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 update-security-group-rule-descriptions-ingress <span class="nt">--group-id</span> sg-02a63c67684d8deed <span class="nt">--ip-permissions</span> <span class="s1">'ToPort=443,IpProtocol=tcp,IpRanges=[{CidrIp=202.171.186.133/32,Description=Home}]'</span>
</code></pre></div></div> <h4 id="delete-security-group">Delete Security Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 delete-security-group <span class="nt">--group-id</span> sg-02a63c67684d8deed
</code></pre></div></div> <h2 id="s3">S3</h2> <h4 id="list-buckets">List Buckets</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls
</span>2020-01-28 18:49:50 customer-data-primary
2020-01-28 18:50:22 customer-data-backup
2020-01-28 18:50:54 wordpress-cdn
2020-01-28 18:52:25 backend-artifacts-20200220-deployment
</code></pre></div></div> <h4 id="list-files-in-a-bucket">List Files in a Bucket</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls </span>wordpress-cdn/wp-content/uploads/2019/10/04/
2019-10-04 15:02:02     133557 amazing-content.jpg
2019-10-04 15:02:02       2986 amazing-content-103x50.jpg
2019-10-04 15:02:02       5640 amazing-content-120x120.jpg
2019-10-04 15:02:02       7924 amazing-content-150x150.jpg
</code></pre></div></div> <h4 id="create-bucket">Create Bucket</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 mb s3://my-awesome-new-bucket
make_bucket: my-awesome-new-bucket
</code></pre></div></div> <h4 id="delete-bucket">Delete Bucket</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 rb s3://my-awesome-new-bucket <span class="nt">--force</span>
</code></pre></div></div> <h4 id="download-s3-object-to-local">Download S3 Object to Local</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">cp </span>s3://my-awesome-new-bucket <span class="nb">.</span>
download: ./backup.tar from s3://my-awesome-new-bucket/backup.tar
</code></pre></div></div> <h4 id="upload-local-file-as-s3-object">Upload Local File as S3 Object</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">cp </span>backup.tar s3://my-awesome-new-bucket
upload: ./backup.tar to s3://my-awesome-new-bucket/backup.tar
</code></pre></div></div> <h4 id="delete-s3-object">Delete S3 Object</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">rm </span>s3://my-awesome-new-bucket/secret-file.gz <span class="nb">.</span>
delete: s3://my-awesome-new-bucket/secret-file.gz
</code></pre></div></div> <h4 id="download-bucket-to-local">Download Bucket to Local</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">sync </span>s3://my-awesome-new-bucket/ /media/Passport-Ultra/Backup
</code></pre></div></div> <h4 id="upload-local-directory-to-bucket">Upload Local Directory to Bucket</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">sync</span> /home/minhaz/Downloads s3://my-awesome-new-bucket/
</code></pre></div></div> <h4 id="share-s3-object-without-public-access">Share S3 Object without Public Access</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 presign s3://my-awesome-new-bucket/business-reports.pdf <span class="nt">--expires-in</span> 3600
https://my-awesome-new-bucket.s3.amazonaws.com/business-reports.pdf?AWSAccessKeyId<span class="o">=</span>AKISUENSAKSIEUAA&amp;Expires<span class="o">=</span>1582876994&amp;Signature<span class="o">=</span>kizOEA93kaIHw7uv25wSFIKLmAx
</code></pre></div></div> <h2 id="api-gateway">API Gateway</h2> <h4 id="list-of-api-gateway-ids-and-names">List of API Gateway IDs and Names</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws apigateway get-rest-apis | jq <span class="nt">-r</span> <span class="s1">'.items[] | .id+" "+.name'</span>
5e3221cf8  backend-api
69ef7d4c8  frontend-api
bb1e3c281  partner-api
f99796943  internal-crm-api
ee86b4cde  import-data-api
</code></pre></div></div> <h4 id="list-of-api-gateway-keys">List of API Gateway Keys</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws apigateway get-api-keys | jq <span class="nt">-r</span> <span class="s1">'.items[] | .id+" "+.name'</span>
ee86b4cde   backend-api-key
69ef7d4c8   partner-api-key
</code></pre></div></div> <h4 id="list-api-gateway-domain-names">List API Gateway Domain Names</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws apigateway get-domain-names | jq <span class="nt">-r</span> <span class="s1">'.items[] | .domainName+" "+.regionalDomainName'</span>
backend-api.mdminhazulhaque.io   d-ee86b4cde.execute-api.ap-southeast-1.amazonaws.com
frontend-api.mdminhazulhaque.io  d-bb1e3c281.execute-api.ap-southeast-1.amazonaws.com
</code></pre></div></div> <h4 id="list-of-resources-for-api-gateway">List of Resources for API Gateway</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws apigateway get-resources <span class="nt">--rest-api-id</span> ee86b4cde  | jq <span class="nt">-r</span> <span class="s1">'.items[] | .id+" "+.path'</span>
ee86b4cde  /<span class="o">{</span>proxy+<span class="o">}</span>
69ef7d4c8  /
</code></pre></div></div> <h4 id="find-lambda-for-api-gateway-resource">Find Lambda for API Gateway Resource</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws apigateway get-integration <span class="nt">--rest-api-id</span> ee86b4cde <span class="nt">--resource-id</span> 69ef7d4c8 <span class="nt">--http-method</span> GET | jq <span class="nt">-r</span> <span class="s1">'.uri'</span>
arn:aws:lambda:ap-southeast-1:987654321:function:backend-api-function-5d4daa47fe4a2:live/invocations
</code></pre></div></div> <h2 id="elb">ELB</h2> <h4 id="list-of-elb-hostnames">List of ELB Hostnames</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elbv2 describe-load-balancers <span class="nt">--query</span> <span class="s1">'LoadBalancers[*].DNSName'</span>  | jq <span class="nt">-r</span> <span class="s1">'to_entries[] | .value'</span>
frontend-lb-1220186848339.ap-southeast-1.elb.amazonaws.com
backend-lb-6208709163457.ap-southeast-1.elb.amazonaws.com
</code></pre></div></div> <h4 id="list-of-elb-arns">List of ELB ARNs</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elbv2 describe-load-balancers | jq <span class="nt">-r</span> <span class="s1">'.LoadBalancers[] | .LoadBalancerArn'</span>
arn:aws:elasticloadbalancing:ap-southeast-1:987654321:loadbalancer/app/frontend-lb/1220186848339
arn:aws:elasticloadbalancing:ap-southeast-1:987654321:loadbalancer/app/backend-lb/6208709163457
</code></pre></div></div> <h4 id="list-of-elb-target-group-arns">List of ELB Target Group ARNs</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elbv2 describe-target-groups | jq <span class="nt">-r</span> <span class="s1">'.TargetGroups[] | .TargetGroupArn'</span>
arn:aws:elasticloadbalancing:ap-southeast-1:987654321:targetgroup/frontend/b6da07d35
arn:aws:elasticloadbalancing:ap-southeast-1:987654321:targetgroup/backend/97ad3b13c
</code></pre></div></div> <h4 id="find-instances-for-a-target-group">Find Instances for a Target Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elbv2 describe-target-health <span class="nt">--target-group-arn</span> arn:aws:elasticloadbalancing:ap-southeast-1:987654321:targetgroup/wordpress-ph/88f517d6b5326a26 | jq <span class="nt">-r</span> <span class="s1">'.TargetHealthDescriptions[] | .Target.Id'</span>
i-0b3b5128445a332db
i-0d1c1cf4e980ac593
i-00f11e8e33c971058
</code></pre></div></div> <h2 id="rds">RDS</h2> <h4 id="list-of-db-clusters">List of DB Clusters</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws rds describe-db-clusters | jq <span class="nt">-r</span> <span class="s1">'.DBClusters[] | .DBClusterIdentifier+" "+.Endpoint'</span>
backend-prod   backend-prod.cluster-b6da07d35.ap-southeast-1.rds.amazonaws.com
internal-prod  internal-dev.cluster-b6da07d35.ap-southeast-1.rds.amazonaws.com
</code></pre></div></div> <h4 id="list-of-db-instances">List of DB Instances</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws rds describe-db-instances | jq <span class="nt">-r</span> <span class="s1">'.DBInstances[] | .DBInstanceIdentifier+" "+.DBInstanceClass+" "+.Endpoint.Address'</span>
backend-dev   db.t3.medium  backend-prod.b6da07d35.ap-southeast-1.rds.amazonaws.com
internal-dev  db.t2.micro   internal-dev.b6da07d35.ap-southeast-1.rds.amazonaws.com
</code></pre></div></div> <h4 id="take-db-instance-snapshot">Take DB Instance Snapshot</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws rds create-db-snapshot <span class="nt">--db-snapshot-identifier</span> backend-dev-snapshot-0001 <span class="nt">--db-instance-identifier</span> backend-dev
aws rds describe-db-snapshots <span class="nt">--db-snapshot-identifier</span> backend-dev-snapshot-0001 <span class="nt">--db-instance-identifier</span> general
</code></pre></div></div> <h4 id="take-db-cluster-snapshot">Take DB Cluster Snapshot</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws rds create-db-cluster-snapshot <span class="nt">--db-cluster-snapshot-identifier</span> backend-prod-snapshot-0002 <span class="nt">--db-cluster-identifier</span> backend-prod
aws rds describe-db-cluster-snapshots <span class="nt">--db-cluster-snapshot-identifier</span> backend-prod-snapshot-0002 <span class="nt">--db-cluster-identifier</span> backend-prod
</code></pre></div></div> <h2 id="elasticache">ElastiCache</h2> <h4 id="list-of-elasticache-machine-type-and-name">List of ElastiCache Machine Type and Name</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache describe-cache-clusters | jq <span class="nt">-r</span> <span class="s1">'.CacheClusters[] | .CacheNodeType+" "+.CacheClusterId'</span>
cache.t2.micro  backend-login-hk
cache.t2.micro  backend-login-vn
cache.t2.micro  backend-login-sg
</code></pre></div></div> <h4 id="list-of-elasticache-replication-groups">List of ElastiCache Replication Groups</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache describe-replication-groups | jq <span class="nt">-r</span> <span class="s1">'.ReplicationGroups[] | .ReplicationGroupId+" "+.NodeGroups[].PrimaryEndpoint.Address'</span>
backend-login-hk backend-login-hk.6da35.ng.0001.apse1.cache.amazonaws.com
backend-login-vn backend-login-vn.6da35.ng.0001.apse1.cache.amazonaws.com
backend-login-sg backend-login-sg.6da35.ng.0001.apse1.cache.amazonaws.com
</code></pre></div></div> <h4 id="list-of-elasticache-snapshots">List of ElastiCache Snapshots</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache describe-snapshots | jq <span class="nt">-r</span> <span class="s1">'.Snapshots[] | .SnapshotName'</span>
automatic.backend-login-hk-2020-02-27-00-27
automatic.backend-login-vn-2020-02-27-00-27
automatic.backend-login-sg-2020-02-27-00-27
</code></pre></div></div> <h4 id="create-elasticache-snapshot">Create ElastiCache Snapshot</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache create-snapshot <span class="nt">--snapshot-name</span> backend-login-hk-snap-0001 <span class="nt">--replication-group-id</span> backend-login-hk <span class="nt">--cache-cluster-id</span> backend-login-hk
</code></pre></div></div> <h4 id="delete-elasticache-snapshot">Delete ElastiCache Snapshot</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache delete-snapshot <span class="nt">--snapshot-name</span> backend-login-hk-snap-0001
</code></pre></div></div> <h4 id="scale-updown-elasticache-replica">Scale Up/Down ElastiCache Replica</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws elasticache increase-replica-count <span class="nt">--replication-group-id</span> backend-login-hk <span class="nt">--apply-immediately</span>
aws elasticache decrease-replica-count <span class="nt">--replication-group-id</span> backend-login-hk <span class="nt">--apply-immediately</span>
</code></pre></div></div> <h2 id="lambda">Lambda</h2> <h4 id="list-of-lambda-functions-runtime-and-memory">List of Lambda Functions, Runtime and Memory</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws lambda list-functions | jq <span class="nt">-r</span> <span class="s1">'.Functions[] | .FunctionName+" "+.Runtime+" "+(.MemorySize|tostring)'</span>
backend-api-function           nodejs8.10  512
backend-signup-email-function  nodejs10.x  128
partner-api-8XJAP1VVLYA7       python3.7   128
marketing-promo-sqs-function   nodejs10.x  128
</code></pre></div></div> <h4 id="list-of-lambda-layers">List of Lambda Layers</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws lambda list-layers | jq <span class="nt">-r</span> <span class="s1">'.Layers[] | .LayerName'</span>
imagemagik-layer
django-layer
nodejs-extra-layer
</code></pre></div></div> <h4 id="list-of-source-event-for-lambda">List of Source Event for Lambda</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws lambda list-event-source-mappings | jq <span class="nt">-r</span> <span class="s1">'.EventSourceMappings[] | .FunctionArn+" "+.EventSourceArn'</span>
arn:aws:lambda:function:backend-api-function           arn:aws:dynamodb:table/prod-user-list/stream
arn:aws:lambda:function:backend-signup-email-function  arn:aws:dynamodb:table/prod-user-email/stream
arn:aws:lambda:function:partner-api-8XJAP1VVLYA7       arn:aws:sqs:partner-input-msg-queue
arn:aws:lambda:function:marketing-promo-sqs-function   arn:aws:sqs:promo-input-msg-queue
</code></pre></div></div> <h4 id="download-lambda-code">Download Lambda Code</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws lambda get-function <span class="nt">--function-name</span> DynamoToSQS | jq <span class="nt">-r</span> .Code.Location
https://awslambda-ap-se-1-tasks.s3.ap-southeast-1.amazonaws.com/snapshots/987654321/backend-api-function-1fda0de7-a751-4586-bf64-5601a410c170
</code></pre></div></div> <div><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9642838276352812" data-ad-slot="8294162148"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> <br /> </div> <h2 id="cloudwatch">Cloudwatch</h2> <h4 id="list-of-cloudwatch-alarms-and-status">List of CloudWatch Alarms and Status</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudwatch describe-alarms | jq <span class="nt">-r</span> <span class="s1">'.MetricAlarms[] | .AlarmName+" "+.Namespace+" "+.StateValue'</span>
backend-autoscale  AWS/EC2             OK
backend-lb         AWS/ApplicationELB  OK
partner-hk         AWS/ECS             ALARM
partner-vn         AWS/ECS             ALARM
partner-sg         AWS/ECS             ALARM
userdata-read      AWS/DynamoDB        OK
userdata-write     AWS/DynamoDB        OK
</code></pre></div></div> <h4 id="create-alarm-for-ec2-high-cpuutilization">Create Alarm for EC2 High CPUUtilization</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudwatch put-metric-alarm <span class="nt">--alarm-name</span> high-cpu-usage <span class="nt">--alarm-description</span> <span class="s2">"Alarm when CPU exceeds 70 percent"</span> <span class="nt">--metric-name</span> CPUUtilization <span class="nt">--namespace</span> AWS/EC2 <span class="nt">--statistic</span> Average <span class="nt">--period</span> 300 <span class="nt">--threshold</span> 70 <span class="nt">--comparison-operator</span> GreaterThanThreshold  <span class="nt">--dimensions</span> <span class="s2">"Name=InstanceId,Value=i-123456789"</span> <span class="nt">--evaluation-periods</span> 2 <span class="nt">--alarm-actions</span> arn:aws:sns:ap-southeast-1:987654321:System-Alerts <span class="nt">--unit</span> Percent
</code></pre></div></div> <h4 id="create-alarm-for-ec2-high-statuscheckfailed_instance">Create Alarm for EC2 High StatusCheckFailed_Instance</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudwatch put-metric-alarm <span class="nt">--alarm-name</span> EC2-StatusCheckFailed-AppServer <span class="nt">--alarm-description</span> <span class="s2">"EC2 StatusCheckFailed for AppServer"</span> <span class="nt">--metric-name</span> StatusCheckFailed_Instance <span class="nt">--namespace</span> AWS/EC2 <span class="nt">--statistic</span> Average <span class="nt">--period</span> 60 <span class="nt">--threshold</span> 0 <span class="nt">--comparison-operator</span> GreaterThanThreshold  <span class="nt">--dimensions</span> <span class="s2">"Name=InstanceId,Value=i-123456789"</span> <span class="nt">--evaluation-periods</span> 3 <span class="nt">--alarm-actions</span> arn:aws:sns:ap-southeast-1:987654321:System-Alerts <span class="nt">--unit</span> Count
</code></pre></div></div> <h2 id="route53">Route53</h2> <h4 id="list-domains">List Domains</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws route53 list-hosted-zones | jq <span class="nt">-r</span> <span class="s1">'.HostedZones[]|.Id+" "+.Name'</span>
/hostedzone/ZEB1PAH4U mysite.com.
/hostedzone/ZQUOHGH3G yoursite.com.
/hostedzone/ZEADEA0CO staywith.us.
</code></pre></div></div> <h4 id="list-records-for-a-domain-zone">List Records for a Domain (Zone)</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws route53 list-resource-record-sets <span class="nt">--hosted-zone-id</span> /hostedzone/ZEB1PAH4U | jq <span class="nt">-r</span> <span class="s1">'.ResourceRecordSets[]| if (.AliasTarget!=null) then .Type+" "+.Name+" "+.AliasTarget.DNSName else .Type+" "+.Name+" "+.ResourceRecords[].Value end'</span>
A      mysite.com.              dualstack.mysite-lb-967522168.ap-southeast-1.elb.amazonaws.com.
A      mysite.com.              11.22.33.44
TXT    _amazonses.mysite.com.   6c6d761371f0480bbe60de0df275b550
A      test.mysite.com.         55.66.77.88
CNAME  www.mysite.com.          mysite.com
</code></pre></div></div> <h2 id="sns">SNS</h2> <h4 id="list-of-sns-topics">List of SNS Topics</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sns list-topics | jq <span class="nt">-r</span> <span class="s1">'.Topics[] | .TopicArn'</span>
arn:aws:sns:ap-southeast-1:987654321:backend-api-monitoring
arn:aws:sns:ap-southeast-1:987654321:dynamodb-count-check
arn:aws:sns:ap-southeast-1:987654321:partner-integration-check
arn:aws:sns:ap-southeast-1:987654321:autoscale-notifications
</code></pre></div></div> <h4 id="list-of-sns-topic-and-related-subscriptions">List of SNS Topic and related Subscriptions</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sns list-subscriptions | jq <span class="nt">-r</span> <span class="s1">'.Subscriptions[] | .TopicArn+" "+.Protocol+" "+.Endpoint'</span>
arn:aws:sns:ap-southeast-1:autoscale-notifications    lambda  arn:aws:lambda:function:autoscale-function
arn:aws:sns:ap-southeast-1:backend-api-monitoring     email   alert@mdminhazulhaque.io
arn:aws:sns:ap-southeast-1:dynamodb-count-check       email   alert@mdminhazulhaque.io
arn:aws:sns:ap-southeast-1:partner-integration-check  lambda  arn:aws:lambda:function:partner-function
arn:aws:sns:ap-southeast-1:autoscale-notifications    lambda  arn:aws:lambda:function:autoscale-function
</code></pre></div></div> <h4 id="publish-to-sns-topic">Publish to SNS Topic</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sns publish <span class="nt">--topic-arn</span> arn:aws:sns:ap-southeast-1:987654321:backend-api-monitoring <span class="se">\</span>
    <span class="nt">--message</span> <span class="s2">"Panic!!!"</span> <span class="se">\</span>
    <span class="nt">--subject</span> <span class="s2">"The API is down!!!"</span>
</code></pre></div></div> <h2 id="dynamodb">DynamoDB</h2> <h4 id="list-of-dynamodb-tables">List of DynamoDB Tables</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb list-tables | jq <span class="nt">-r</span> .TableNames[]
userdata_hk
userdata_vn
userdata_sg
providers
events
</code></pre></div></div> <h4 id="get-all-items-from-a-table">Get All Items from a Table</h4> <p>This command will stream ALL items untill SIGINT is sent</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb scan <span class="nt">--table-name</span> events 
</code></pre></div></div> <h4 id="get-item-count-from-a-table">Get Item Count from a Table</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb scan <span class="nt">--table-name</span> events <span class="nt">--select</span> COUNT | jq .ScannedCount
726119
</code></pre></div></div> <h4 id="get-item-using-key">Get Item using Key</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb get-item <span class="nt">--table-name</span> events <span class="nt">--key</span> <span class="s1">'{"email": {"S": "admin@mdminhazulhaque.io"}}'</span>
<span class="o">{</span>
    <span class="s2">"Item"</span>: <span class="o">{</span>
        <span class="s2">"email"</span>: <span class="o">{</span>
            <span class="s2">"S"</span>: <span class="s2">"admin@mdminhazulhaque.io"</span>
        <span class="o">}</span>,
        <span class="s2">"created_at"</span>: <span class="o">{</span>
            <span class="s2">"N"</span>: <span class="s2">"1554780667296"</span>
        <span class="o">}</span>,
        <span class="s2">"event_type"</span>: <span class="o">{</span>
            <span class="s2">"S"</span>: <span class="s2">"DISPATCHED"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="get-specific-fields-from-an-item">Get Specific Fields from an Item</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb get-item <span class="nt">--table-name</span> events <span class="nt">--key</span> <span class="s1">'{"email": {"S": "admin@mdminhazulhaque.io"}}'</span> <span class="nt">--attributes-to-get</span> event_type
<span class="o">{</span>
    <span class="s2">"Item"</span>: <span class="o">{</span>
        <span class="s2">"event_type"</span>: <span class="o">{</span>
            <span class="s2">"S"</span>: <span class="s2">"DISPATCHED"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="delete-item-using-key">Delete Item using Key</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws dynamodb delete-item <span class="nt">--table-name</span> events <span class="nt">--key</span> <span class="s1">'{"email": {"S": "admin@mdminhazulhaque.io"}}'</span>
</code></pre></div></div> <h2 id="sqs">SQS</h2> <h4 id="list-queues">List Queues</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs list-queues | jq <span class="nt">-r</span> <span class="s1">'.QueueUrls[]'</span>
https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo
https://ap-southeast-1.queue.amazonaws.com/987654321/user-signup
</code></pre></div></div> <h4 id="create-queue">Create Queue</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs create-queue <span class="nt">--queue-name</span> public-events.fifo | jq <span class="nt">-r</span> .QueueUrl
https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo
</code></pre></div></div> <h4 id="count-messages-in-queue">Count Messages in Queue</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs get-queue-attributes <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo | jq <span class="nt">-r</span> <span class="s1">'.Attributes | .QueueArn + " " + .ApproximateNumberOfMessages'</span>
arn:aws:sqs:ap-southeast-1:987654321:events.fifo 42
</code></pre></div></div> <h4 id="send-message">Send Message</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs send-message <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo <span class="nt">--message-body</span> Hello
<span class="o">{</span>
    <span class="s2">"MD5OfMessageBody"</span>: <span class="s2">"37b51d194a7513e45b56f6524f2d51f2"</span>,
    <span class="s2">"MessageId"</span>: <span class="s2">"4226398e-bab0-4bee-bf5a-8e7ae18c855a"</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="receive-message">Receive Message</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs receive-message <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo | jq <span class="nt">-r</span> <span class="s1">'.Messages[] | .Body'</span>
Hello
</code></pre></div></div> <h4 id="delete-message">Delete Message</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs delete-message <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo <span class="nt">--receipt-handle</span> <span class="s2">"AQEBpqKLxNb8rIOn9ykSeCkKebNzn0BrEJ3Cg1RS6MwID2t1oYHCnMP06GnuVZGzt7kpWXZ5ieLQ=="</span>
</code></pre></div></div> <h4 id="purge-queue">Purge Queue</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs purge-queue <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo
</code></pre></div></div> <h4 id="delete-queue">Delete Queue</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws sqs delete-queue <span class="nt">--queue-url</span> https://ap-southeast-1.queue.amazonaws.com/987654321/public-events.fifo
</code></pre></div></div> <h2 id="cloudfront">CloudFront</h2> <h4 id="list-of-cloudfront-distributions-and-origins">List of CloudFront Distributions and Origins</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudfront list-distributions | jq <span class="nt">-r</span> <span class="s1">'.DistributionList.Items[] | .DomainName+" "+.Origins.Items[0].DomainName'</span>
d9d5bb1e3c281f.cloudfront.net  frontend-prod-hk.s3.amazonaws.com
d12b09e8a0a996.cloudfront.net  frontend-prod-vn.s3.amazonaws.com
db64e7e9b3cc22.cloudfront.net  frontend-prod-sg.s3.amazonaws.com
d5e3221cf8b921.cloudfront.net  cdn.mdminhazulhaque.io
</code></pre></div></div> <h4 id="create-cache-invalidation">Create Cache Invalidation</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudfront create-invalidation <span class="nt">--distribution-id</span> D12B09E8A0A996  <span class="nt">--path</span> /blog/<span class="se">\*</span> /blog/assets/<span class="se">\*</span> | jq <span class="nt">-r</span> <span class="s1">'.Invalidation.Id'</span>
IALJ5AL93ZD79
</code></pre></div></div> <h4 id="check-cache-invalidation-status">Check Cache Invalidation Status</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cloudfront get-invalidation <span class="nt">--distribution-id</span> D12B09E8A0A996 <span class="nt">--id</span> IALJ5AL93ZD79 | jq <span class="nt">-r</span> <span class="s1">'.Invalidation.Status'</span>
Completed
</code></pre></div></div> <h2 id="amplify">Amplify</h2> <h4 id="list-of-amplify-apps-and-source-repository">List of Amplify Apps and Source Repository</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws amplify list-apps | jq <span class="nt">-r</span> <span class="s1">'.apps[] | .name+" "+.defaultDomain+" "+.repository'</span>
fe-vn  d9d5bb1e3c281f.amplifyapp.com  https://bitbucket.org/aws/frontend-vn
fe-hk  db64e7e9b3cc22.amplifyapp.com  https://bitbucket.org/aws/frontend-hk
fe-sg  d5e3221cf8b921.amplifyapp.com  https://bitbucket.org/aws/frontend-sg
</code></pre></div></div> <h2 id="cognito">Cognito</h2> <h4 id="list-of-user-pool-ids-and-names">List of User Pool IDs and Names</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cognito-idp list-user-pools <span class="nt">--max-results</span> 60 | jq <span class="nt">-r</span> <span class="s1">'.UserPools[] | .Id+" "+.Name'</span>
ap-southeast-1_b6da07d35 prod-users
ap-southeast-1_b6da07d34 dev-users
</code></pre></div></div> <h4 id="list-of-phone-and-email-of-all-users">List of Phone and Email of All Users</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws cognito-idp list-users <span class="nt">--user-pool-id</span> ap-southeast-1_b6da07d35 | jq <span class="nt">-r</span> <span class="s1">'.Users[].Attributes | from_entries | .sub + " " + .phone_number + " " + .email'</span>
585fb96e-525c-4f9b-9d41-865d2dffde9b +601122334455 admin@mdminhazulhaque.io
71f2778c-8e21-4775-94dc-e363c77d1ae1 +601122334455 foo@bar.com
8fc1882e-e661-49db-88e6-45d370bc352a +601122334455 cli@aws.com
</code></pre></div></div> <h2 id="iam-user">IAM User</h2> <h4 id="list-of-userid-and-username">List of UserId and UserName</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-users | jq <span class="nt">-r</span> <span class="s1">'.Users[]|.UserId+" "+.UserName'</span>
AIDAZBWIOJIQFOLNBXXCVSUQ kaiser
AIDAZCTWYVXYOKSHVWXPYPLR thornton
AIDAZUYALCGFQJENBCZFJTVX maldonado
AIDAZKQAFIGQJWOKKSKRBLGE key
AIDAZXUDGQVQCEWBFGIJOWWY nelson
</code></pre></div></div> <h4 id="get-single-user">Get Single User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam get-user <span class="nt">--user-name</span> kaiser
</code></pre></div></div> <h4 id="add-user">Add User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam create-user <span class="nt">--user-name</span> audit-temp
</code></pre></div></div> <h4 id="delete-user">Delete User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam delete-user <span class="nt">--user-name</span> audit-temp
</code></pre></div></div> <h4 id="list-access-keys-for-user">List Access Keys for User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-access-keys <span class="nt">--user-name</span> audit-temp | jq <span class="nt">-r</span> .AccessKeyMetadata[].AccessKeyId
AKIABWIOJIQFOLNBXXCVSUQ
AKIACTWYVXYOKSHVWXPYPLR
AKIAUYALCGFQJENBCZFJTVX
</code></pre></div></div> <h4 id="delete-access-key-for-user">Delete Access Key for User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam delete-access-key <span class="nt">--user-name</span> audit-temp <span class="nt">--access-key-id</span> AKIABWIOJIQFOLNBXXCVSUQ
</code></pre></div></div> <h4 id="activatedeactivate-access-key-for-user">Activate/Deactivate Access Key for User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam update-access-key <span class="nt">--status</span> Inactive <span class="nt">--user-name</span> audit-temp <span class="nt">--access-key-id</span> AKIABWIOJIQFOLNBXXCVSUQ
aws iam update-access-key <span class="nt">--status</span> Active   <span class="nt">--user-name</span> audit-temp <span class="nt">--access-key-id</span> AKIABWIOJIQFOLNBXXCVSUQ
</code></pre></div></div> <h4 id="generate-new-access-key-for-user">Generate New Access Key for User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam create-access-key <span class="nt">--user-name</span> audit-temp | jq <span class="nt">-r</span> <span class="s1">'.AccessKey | .AccessKeyId+" "+.SecretAccessKey'</span>
AKIABWIOJIQFOLNBXXCVSUQ p9ge02ebLX9jobdQKmfikRqCiEw3HBylwHyXq0z
</code></pre></div></div> <h2 id="iam-group">IAM Group</h2> <h4 id="list-groups">List Groups</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-groups | jq <span class="nt">-r</span> .Groups[].GroupName
developers
administrators
testers
marketing-ro
</code></pre></div></div> <h4 id="adddelete-groups">Add/Delete Groups</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam create-group <span class="nt">--group-name</span> business-ro
aws iam delete-group <span class="nt">--group-name</span> business-ro
</code></pre></div></div> <h4 id="list-of-policies-and-arns">List of Policies and ARNs</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-policies               | jq <span class="nt">-r</span> <span class="s1">'.Policies[]|.PolicyName+" "+.Arn'</span>
aws iam list-policies <span class="nt">--scope</span> AWS   | jq <span class="nt">-r</span> <span class="s1">'.Policies[]|.PolicyName+" "+.Arn'</span>
aws iam list-policies <span class="nt">--scope</span> Local | jq <span class="nt">-r</span> <span class="s1">'.Policies[]|.PolicyName+" "+.Arn'</span>
</code></pre></div></div> <h4 id="list-of-usergrouproles-for-a-policy">List of User/Group/Roles for a Policy</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-entities-for-policy <span class="nt">--policy-arn</span> arn:aws:iam::987654321:policy/Marketing-ReadOnly
</code></pre></div></div> <h4 id="list-policies-for-a-group">List Policies for a Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-attached-group-policies <span class="nt">--group-name</span> business-ro
</code></pre></div></div> <h4 id="add-policy-to-a-group">Add Policy to a Group</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam attach-group-policy --group-name business-ro --policy-arn arn:aws:iam::aws:policy/DynamoDBReadOnlyAccess
</code></pre></div></div> <h4 id="add-user-to-a-group">Add User to a Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam add-user-to-group <span class="nt">--group-name</span> business-ro <span class="nt">--user-name</span> marketing-michael
</code></pre></div></div> <h4 id="remove-user-from-a-group">Remove User from a Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam remove-user-from-group <span class="nt">--group-name</span> business-ro <span class="nt">--user-name</span> marketing-alice
</code></pre></div></div> <h4 id="list-users-in-a-group">List Users in a Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam get-group <span class="nt">--group-name</span> business-ro
</code></pre></div></div> <h4 id="list-groups-for-a-user">List Groups for a User</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam list-groups-for-user <span class="nt">--user-name</span> qa-bob
</code></pre></div></div> <h4 id="attachdetach-policy-to-a-group">Attach/Detach Policy to a Group</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam detach-group-policy <span class="nt">--group-name</span> business-ro <span class="nt">--policy-arn</span> arn:aws:iam::aws:policy/DynamoDBFullAccess
aws iam attach-group-policy <span class="nt">--group-name</span> business-ro <span class="nt">--policy-arn</span> arn:aws:iam::aws:policy/DynamoDBFullAccess
</code></pre></div></div> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9642838276352812" data-ad-slot="7351100586" data-ad-format="auto" data-full-width-responsive="true"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> <div id="disqus_thread"></div> <script type="text/javascript"> (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'https://bitsfromminhaz.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </body> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57632461-7"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-57632461-7'); </script> </html>
